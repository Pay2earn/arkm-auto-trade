from src.auto_trade import ARKMAutoTrade

def main():
    print("=== Welcome to ARKM Auto Trade Bot ===")

    # กำหนด API Key (คุณสามารถโหลดจาก config ไฟล์แทน)
    api_key = "your_api_key_here"

    # สร้างอินสแตนซ์ของ ARKMAutoTrade
    arkm_bot = ARKMAutoTrade(api_key)

    # เริ่มต้นการทำงานของบอท
    try:
        # ตัวอย่าง: ดึงรายการสินค้า
        print("Fetching item listings...")
        items = arkm_bot.get_items()
        print("Available items:", items)

        # ตัวอย่าง: ซื้อสินค้า
        print("\nAttempting to buy an item...")
        if items:
            item_id = items[0].get("id")  # ใช้ ID ของสินค้าแรกในรายการ
            price = items[0].get("price")  # ใช้ราคาของสินค้าแรก
            buy_response = arkm_bot.buy_item(item_id=item_id, price=price)
            print("Buy response:", buy_response)

        # ตัวอย่าง: ขายสินค้า
        print("\nAttempting to sell an item...")
        if items:
            sell_response = arkm_bot.sell_item(item_id=item_id, price=price + 10)  # กำหนดราคาขายที่เพิ่มขึ้น
            print("Sell response:", sell_response)

    except Exception as e:
        print(f"An error occurred: {e}")

if __name__ == "__main__":
    main()
