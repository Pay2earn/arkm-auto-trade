from src.auto_trade import ARKMAutoTrade

def main():
    print("=== Welcome to ARKM Auto Trade Bot ===")
    
    # สร้างอินสแตนซ์ของ ARKM Auto Trade
    arkm_bot = ARKMAutoTrade()

    try:
        # ดึงรายการสินค้า
        print("Fetching item listings...")
        items = arkm_bot.get_items()
        print("Available items:", items)

        # ซื้อสินค้าชิ้นแรกในรายการ
        if items:
            item_id = items[0].get("id")
            price = items[0].get("price")
            print("\nAttempting to buy item:", item_id)
            buy_response = arkm_bot.buy_item(item_id, price)
            print("Buy response:", buy_response)

            # ขายสินค้าชิ้นเดียวกัน
            print("\nAttempting to sell item:", item_id)
            sell_response = arkm_bot.sell_item(item_id, price + 10)
            print("Sell response:", sell_response)

    except Exception as e:
        print(f"An error occurred: {e}")

if __name__ == "__main__":
    main()
